




<html>

<head>
    <title>here is a test</title>
</head>
<body>

<script>

function isArray(a){
    return a && a.constructor == Array;
}
function sumArray(arrs){
    var i;
    var lens = arrs.length;
    var sum = 0;
    for(i = 0; i < lens; i++){
        if(isArray(arrs[i])){
            sum += sumArray(arrs[i]);
        }else{
            sum += arrs[i];
        }
    }
    return sum;
}
function calcArea(data,allArea){ //原始数据，处理成面积
    var areas = [];
    var unitArea = allArea/sumArray(data);
    var i = 0;
    var len = data.length;
    for(i = 0; i < len; i++){
        if(isArray(data[i])){
            areas.push(calcArea(data[i],sumArray(data[i])*unitArea));
        }
        else{
            areas.push(data[i]*unitArea);
        }
    }
    return areas;
}

var data = [1,[2,3,4],1,[[2,3],[6,7,1]]]; 
results = calcArea(data,60);
console.log(results);
</script>

</body>
</html>